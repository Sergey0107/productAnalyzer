import json


def get_tz_analyze_prompt():
    return 'Данные, которые ты получил - это данные из docx документа технического задания на покупку изделия. Проанализируй их и верни данные в json, которые можно будет сравнить с другим json файлом характеристик. Верни эти данные строго в формате JSON. Используй только корректный JSON-объект без текста, пояснений, комментариев, markdown, кавычек вне структуры или лишних символов. Все значения должны быть извлечены из входных данных без искажения; отсутствующие значения указывай как null. В ответе должен быть только JSON, ничего больше.'


def get_passport_initial_analyze_prompt():
    return ("Проанализируй изображения страниц технического паспорта изделия. "
            "Извлеки все технические характеристики.\n\n"
            "Правила:\n"
            "- Верни данные строго в формате JSON\n"
            "- Ключ — название характеристики (не изменяй названия)\n"
            "- Значение — числовое или текстовое значение\n"
            "- Сохраняй единицы измерения\n"
            "- Если значение отсутствует — укажи null\n"
            "- Не придумывай данные\n"
            "- В ответе должен быть ТОЛЬКО валидный JSON")


def _create_passport_iterative_prompt(accumulated_data, base_prompt):
        return (
            f"{base_prompt}\n\n"
            f"Уже извлечённые характеристики из предыдущих страниц:\n"
            f"```json\n{json.dumps(accumulated_data, ensure_ascii=False, indent=2)}\n```\n\n"
            f"Дополни этот JSON новыми характеристиками с текущих страниц. "
            f"Если характеристика уже есть — обнови значение только если новое более полное или точное. "
            f"Верни полный обновлённый JSON."
        )